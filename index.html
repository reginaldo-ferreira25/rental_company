<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Login</title>
    <link rel="stylesheet" href="./css/stilo.css">
    
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    <div class="login-container">
        <h2>Login</h2>
        <form id="loginForm">
            <div class="form-group">
                <label for="username">Usuário:</label>
                <input type="text" id="username" name="username" required>
                <div class="error" id="usernameError">Por favor, insira um nome de usuário.</div>
            </div>
            <div class="form-group">
                <label for="password">Senha:</label>
                <input type="password" id="password" name="password" required>
                <div class="error" id="passwordError">Por favor, insira uma senha.</div>
            </div>
            <button type="submit" class="btn">Entrar</button>
        </form>
        <div id="googleSignInButton"></div>
    </div>

    <script>
        // Configuração do Google Sign-In
        function handleCredentialResponse(response) {
            console.log('Response: ' + response);
            console.log('Encoded JWT ID token: ' + response.credential);
            // Envie o token para o servidor ou faça a autenticação do lado do cliente
        }

        window.onload = function () {
            google.accounts.id.initialize({
                client_id: '405226702922-38vtnet3g42np6m9ru598lp8i63deeod.apps.googleusercontent.com',
                callback: handleCredentialResponse
            });
            google.accounts.id.renderButton(
                document.getElementById('googleSignInButton'),
                { theme: 'outline', size: 'large' }  // Personalize o botão conforme necessário
            );
            google.accounts.id.prompt(); // Exibe o prompt de login
        };

        // Validação do formulário de login
        document.getElementById('loginForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Impede o envio do formulário
            
            // Limpar mensagens de erro
            document.getElementById('usernameError').style.display = 'none';
            document.getElementById('passwordError').style.display = 'none';
            
            // Verificar se os campos estão preenchidos
            let isValid = true;
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            if (!username) {
                document.getElementById('usernameError').style.display = 'block';
                isValid = false;
            }

            if (!password) {
                document.getElementById('passwordError').style.display = 'block';
                isValid = false;
            }

            // Se todos os campos são válidos, envie o formulário
            if (isValid) {
                fetch('https://seu-servidor.com/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ username, password })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('Login bem-sucedido!');
                    } else {
                        alert('Falha no login: ' + data.message);
                    }
                })
                .catch(error => console.error('Erro:', error));
            }
        });
    </script>
</body>
</html>
